<html>
<head>
<meta charset="utf-8">

<script src="classes.js"></script>
<script src="math_classes.js"></script>
<script language="javascript">

  var camera;
  var cube;
  var graphics;
  var plane;

  function load(){

    var can = document.getElementById("cnv");
    can.width = 0.96*window.innerWidth;
    can.height = 0.96*window.innerHeight;

    graphics = new GraphicsControl(can);
    camera = new Camera();
    var distance = can.width / (2 * Math.tan(camera.field_of_view / 2));
    var r = can.width / camera.field_of_view;
    plane = new ProjectionPlane(window.innerWidth, window.innerHeight, distance, r);

    cube = new Cube(150,0,40,60, Math.PI / 12);

    plane.projectCube(cube, camera, graphics);

  }

  function redraw(){

    graphics.clear();
    plane.projectCube(cube, camera, graphics);
    //console.log(camera.x);
    //console.log(camera.phi);

  }

</script>

</head>
<body onload="load();">
<input type="button" value="<-" onclick="camera.rotate(-0.03*Math.PI); redraw();">
<input type="button" value="->" onclick="camera.rotate(0.03*Math.PI); redraw();">
<input type="button" value="^" onclick="camera.move(5*Math.cos(camera.phi),0,5*Math.sin(camera.phi)); redraw();">
<input type="button" value="<" onclick="camera.move(5*Math.sin(camera.phi),0,-5*Math.cos(camera.phi)); redraw();">
<input type="button" value=">" onclick="camera.move(-5*Math.sin(camera.phi),0,5*Math.cos(camera.phi)); redraw();">
<input type="button" value="v" onclick="camera.move(-5*Math.cos(camera.phi),0,0); redraw();">
<div>
<canvas id="cnv" style="border: solid 1px;"></canvas>
<div style="height: 15px; position:absolute; top: 50%; left: 50%; width: 15px; background-color: #000;"></div>
</div>
</body>
</html>
